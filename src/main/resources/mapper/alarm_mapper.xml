<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>
<mapper namespace="com.tmtm.alarm.AlarmDAO">

<select id="list" parameterType="String" resultType="alarm">
SELECT as2.alarm_num, a.alarm_sort_num, a.alarm_content, a.send_date, a.sender, all_num  , as3.alarm_sort_name , e.emp_name, as2.read_check 
FROM alarm_send as2 join alarm a on as2.alarm_num = a.alarm_num 
join alarm_sort as3 on a.alarm_sort_num = as3.alarm_sort_num 
join employee e on a.sender = e.emp_num 
where as2.emp_num = #{emp_num}

</select>

<select id="alarmNum" parameterType="String" resultType="alarm">
SELECT alarm_num from alarm_send as2 where emp_num =#{emp_num} and read_check = 0
</select>

<select id="detailInfo" parameterType="int" resultType="alarm">
SELECT alarm_sort_num , all_num  from alarm a where alarm_num = #{alarm_num}
</select>

<update id="alarmCount" parameterType="int">
update alarm_send set read_check = 1 where alarm_num = #{alarm_num} 
</update>



	
</mapper>